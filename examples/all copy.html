<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rhythm JS Tests</title>
    <style>
        html,
        body {
            margin: 0;
            width: 100%;
            height: 100%;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>

<body>
    <h1>Click in this document to start playing the music!</h1>
</body>

<script type="module">
    import { RhythmContext, Play, Gain } from "../dist/rhythm.esm.js";

    async function play() {
        const song = new Play("./celery_in_a_carrot_field.ogg");

        const rhythm = new RhythmContext();
        const compiled_song = await rhythm.compile(song);

        const faded_song = await rhythm.compile(
            new Gain(
                compiled_song, // You could very well put any other Audio Command here. It doesn't have to be compiled.
                [
                    {
                        value: 0.01, // Can't exponentially fade in from a flat 0.
                        from_start: 0
                    },
                    {
                        transition: "exponential",
                        value: 1,
                        from_start: 20
                    },
                    {
                        value: 1,
                        from_start: compiled_song.duration - 20
                    },
                    {
                        transition: "exponential",
                        value: 0.01, // Can't exponentially fade out to a flat 0.
                        from_start: compiled_song.duration
                    }
                ]
            )
        );

        faded_song.schedule_play();
    }

    play();
</script>

</html>