<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soundtrack JS Tests</title>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <h1></h1>
</body>

<script type="module">
    import { Loader, Clip, Play } from "../dist/soundtrack.esm.js";

    // const player = new Player(
    //     new Clip(
    //         new Play("./15.oga"),
    //         0,
    //         60
    //     )
    // );

    // let compiled = null;

    // async function load() {
    //     compiled = await player.compile();
    // }

    // load();

    document.body.onclick = (_) => {
        // if (compiled === null) {
        //     console.log("Loading...");
        //     return;
        // }

        // console.log(compiled);
        // console.log("Playing!");
        // compiled.schedule();

        async function play() {
            console.log("1");
            const loader = new Loader();
            console.log("2");
            const audio_track = await loader.load(new Clip(new Play("./celery_in_a_carrot_field.ogg"), 0, 10));
            console.log("3");

            console.log(audio_track);

            console.log("eh1?");
            const playing = audio_track.schedule_play();
            console.log("eh?");

            playing.schedule_stop(5);

            // setTimeout(
            //     () => {
            //         playing.schedule_stop();
            //     },
            //     2000
            // );
        }

        play();
    };
</script>

</html>